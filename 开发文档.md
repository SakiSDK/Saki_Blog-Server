### 初期配置
#### 安装typeScript相关依赖
1. 初始化package.json
```bash
pnpm init
```
2. 安装ts\ts-node\类型声明
```bash 
# TypeScript 核心
pnpm add -D typescript ts-node ts-node-dev

# TypeScript 类型定义
pnpm add -D @types/node @types/express @types/cors @types/helmet @types/morgan
pnpm add -D @types/jsonwebtoken @types/bcryptjs @types/yup

# 代码质量和格式化
pnpm add -D eslint @typescript-eslint/eslint-plugin @typescript-eslint/parser
pnpm add -D prettier eslint-config-prettier eslint-plugin-prettier
```
3. 创建tsconfig.json
```bash
npx tsc --init
```

#### 安装基础依赖
```bash
# 安装生产依赖
pnpm add express jsonwebtoken bcryptjs cors helmet morgan yup
# 数据库相关
pnpm add mysql2 sequelize
# 日志相关
pnpm add winston winston-daily-rotate-file
# 安装JWT验证
pnpm add jsonwebtoken
pnpm add -D @types/jsonwebtoken
```

#### 后端校验依赖
```bash 
# 用于参数校验
pnpm add joi 
```

#### 数据转换
```bash 
# 驼峰转下划线
pnpm add snakecase-keys
# 下划线转驼峰
pnpm add camelcase-keys
```

### 生成随机字符串
1. 生成三十二位字符串
`node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"`


### 对数组里的每个元素执行异步函数，同时可以控制并发数，防止同时跑太多导致内存或网络崩掉。
1. 安装依赖
```bash
pnpm add p-map
```
2. 使用
```typescript
import pMap from 'p-map';

const moved = await pMap(
  tempPaths,
  async (tempPath: string) => {
    try {
      const movedPath = await ImageService.moveToFormalDir(tempPath, scene);
      return movedPath;
    } catch (error) {
      throw error;
    }
  },
  { concurrency }
);
```

### 开启meilisearch服务
1. 安装依赖
```bash
pnpm add meilisearch
```
2. 创建meilisearch.ts
3. 启动服务
```bash
# 前台启动
alias meili-start='./meilisearch --http-addr 127.0.0.1:7700'
# 后台启动（brew services）
alias meili-start-bg='brew services start meilisearch'
# 停止服务
alias meili-stop='brew services stop meilisearch'
# 查看服务状态
alias meili-status='brew services list | grep meilisearch'
# 健康检查
alias meili-health='curl http://127.0.0.1:7700/health'
```